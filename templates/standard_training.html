{% extends 'base.html' %} {% load static %} {% block content %}
<div class="container min-vh-100">
  <div class="d-flex justify-content-end mt-3">
    <button
      class="btn btn-outline-danger d-flex align-items-center"
      data-toggle="modal"
      data-target="#exampleModalCenter"
    >
      Settings
      <span class="ml-2" style="font-size: 20px"
        ><i class="fas fa-cog"></i
      ></span>
    </button>
    <!-- Modal -->
    <div
      class="modal fade"
      id="exampleModalCenter"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalCenterTitle"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Settings</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="bg-light rounded border">
              <form class="p-3">
                <h4>Train Model</h4>
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <label for="inputEmail4">Epochs:</label>
                    <input
                      value="10"
                      min="1"
                      max="100"
                      type="number"
                      class="form-control"
                      id="inputEmail4"
                    />
                  </div>
                  <div class="form-group col-md-6">
                    <label for="inputPassword4">Patch sizes:</label>
                    <input
                      type="password"
                      class="form-control"
                      id="inputPassword4"
                    />
                  </div>
                </div>
                <div class="form-group">
                  <label for="inputAddress">Address</label>
                  <input
                    type="text"
                    class="form-control"
                    id="inputAddress"
                    placeholder="1234 Main St"
                  />
                </div>
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <label for="inputCity">City</label>
                    <input type="text" class="form-control" id="inputCity" />
                  </div>
                  <div class="form-group col-md-6">
                    <label for="inputState">State</label>

                    <select
                      class="js-example-basic-multiple form-control"
                      name="states[]"
                    >
                      <optgroup label="Group Name">
                        <option value="AL">Alabama</option>
                        <option value="WY">Wyoming</option>
                        <option value="WY">Wyoming</option>
                        <option value="WY">Wyoming</option>
                        <option value="WY">Wyoming</option>
                        <option value="WY">Wyoming</option>
                        <option value="WY">Wyoming</option>
                        <option value="WY">Wyoming</option>
                      </optgroup>
                      <option value="AL">Alabama</option>
                      <option value="WY">Wyoming</option>
                      <option value="WY">Wyoming</option>
                      <option value="WY">Wyoming</option>
                      <option value="WY">Wyoming</option>
                      <option value="WY">Wyoming</option>
                      <option value="WY">Wyoming</option>
                      <option value="WY">Wyoming</option>
                    </select>
                  </div>
                </div>
                <div class="form-group"></div>
              </form>
            </div>
          </div>
          <div class="modal-footer justify-content-between">
            <button type="button" class="btn btn-danger">
              Reset Default
              <i class="ml-2 fas fa-history"></i>
            </button>
            <button type="button" class="btn btn-primary">
              Save
              <i class="ml-2 fas fa-save"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <h1 class="my-4">Standard Training</h1>
  <div class="alert alert-primary" role="alert">
    A simple primary alertâ€”check it out!
  </div>
  <style>
    .no-arrow::after {
      display: none !important;
    }
  </style>

  <div class="row">
    <div class="col-sm-7 pr-sm-2">
      <div class="p-3 border shadow mb-3" style="border-radius: 10px">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="text-center">Training</h4>
          <button
            class="btn"
            style="outline: none"
            data-toggle="modal"
            data-target="#exampleModalCenter"
          >
            <i class="fas fa-cog"></i>
          </button>
        </div>
        <button
          class="btn btn-light border w-100 py-2"
          style="font-size: 1.3rem; font-weight: 500"
        >
          Train Model
        </button>
      </div>

      {% for label, images in images_by_labels %}
      <div class="border mb-3 shadow bg-light" style="border-radius: 10px">
        <div
          class="px-3 pt-3 pb-2 border-bottom d-flex justify-content-between align-content-center"
        >
          <h5>{{ label.name }}</h5>
          <div class="dropdown">
            <span
              type="button"
              class="no-arrow dropdown-toggle px-2"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <i class="fas fa-ellipsis-v"></i>
            </span>
            <div class="dropdown-menu dropdown-menu-right shadow">
              <a class="dropdown-item" href="#">Delete class</a>
              <a class="dropdown-item" href="#">Disable class</a>
              <a class="dropdown-item" href="#">Remove All Samples</a>
              <a class="dropdown-item" href="#">Download Samples</a>
            </div>
          </div>
        </div>

        <div>
          <h6 class="pl-3 pt-3">{{ images|length }} Images Samples</h6>

          <div class="d-flex align-items-center p-3">
            <!-- <button
              type="button"
              class="sample-source-btn btn p-2 d-flex flex-column justify-content-between align-items-center align-self-start gap-1 mr-2"
            >
              <i class="fas fa-upload" style="font-size: 20px"></i>
              <span>Upload</span>
            </button> -->
            <ol
              class="p-0 m-0"
              style="
                list-style: none;
                white-space: nowrap;
                overflow-x: auto;
                min-height: 70px;
              "
            >
              {% for image in images %}
              <li
                style="
                  width: 58px;
                  height: 58px;
                  margin-right: 5px;
                  display: inline-block;
                  border-radius: 6px;
                "
              >
                <a
                  href="{% static 'datasets/cifar10/' %}{{ label.name }}/{{ image.name }}"
                  data-fancybox
                  data-caption="{{ label.name }}"
                >
                  <img
                    src="{% static 'datasets/cifar10/' %}{{ label.name }}/{{ image.name }}"
                    style="width: 100%; border-radius: 4px"
                    class="border"
                    loading="lazy"
                  />
                </a>
              </li>
              {% endfor %}
            </ol>
          </div>
        </div>
      </div>

      {% endfor %}
    </div>
    <div class="col-sm-5 pl-sm-2">
      <div class="bg-light rounded border p-3">
        <h4>Preview</h4>
        <hr />
        <div class="d-flex align-items-center justify-content-between">
          <div class="d-flex align-items-center justify-content-start">
            <h6 class="mr-3 mb-0">INPUT</h6>

            <div class="custom-control custom-switch">
              <input
                type="checkbox"
                class="custom-control-input"
                id="customSwitch"
              />
              <label
                class="custom-control-label"
                for="customSwitch"
                style="user-select: none"
              >
                <b>OFF</b>
              </label>
            </div>
          </div>

          <div>
            <select
              name=""
              id="select_input_predict"
              style="min-width: 100px"
              data-minimum-results-for-search="Infinity"
            >
              <option value="file" selected>File</option>
              <option value="webcam">Webcam</option>
            </select>
          </div>
        </div>
        <div class="">
          <input id="upload_img" type="file" hidden />
          <label
            for="upload_img"
            class="d-flex flex-column align-items-center justify-content-center btn mt-3 p-3"
            style="background-color: #d2e3fc; color: #1967d2"
          >
            <span><i class="fas fa-upload"></i></span>
            Choose images from your files, or drag &amp; drop here
          </label>
        </div>

        <div class="border">
          <img
            style="width: 100%"
            src="{% static 'images/image_placeholder.png'%}"
            alt=""
          />
        </div>
        <div>
          <button
            style="background-color: #d2e3fc"
            class="btn w-100 p-3 text-center mt-3"
          >
            <h5 class="font-weight-bold">PREDICT</h5>
          </button>
        </div>
        <div>
          <h5>OUTPUT:</h5>

          <div class="d-flex justify-content-between align-items-center">
            <h6 class="mb-0" style="width: 20%">Class 1</h6>
            <div
              class="progress"
              style="width: 80%; height: 29px; border-radius: 6px"
            >
              <div
                class="progress-bar"
                role="progressbar"
                style="width: 25%"
                aria-valuenow="25"
                aria-valuemin="0"
                aria-valuemax="100"
              >
                25%
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  $(document).ready(function () {
    $("select").select2({
      width: "resolve",
    });

    Fancybox.bind("[data-fancybox]", {
      groupAll: true,
      buttons: ["zoom", "slideShow", "fullScreen", "thumbs", "close"],
      loop: true,
      protect: true,
    });

    $("#customSwitch").change(function () {
      let label_ele = $("#customSwitch").siblings("label");
      console.log();
      if (label_ele.text().trim() == "ON") {
        label_ele.text("OFF");
      } else {
        label_ele.text("ON");
      }
    });
  });
</script>
{% endblock %}
